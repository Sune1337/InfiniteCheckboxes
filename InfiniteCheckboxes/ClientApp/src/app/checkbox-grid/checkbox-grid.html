<cdk-virtual-scroll-viewport [itemSize]="itemSize()" class="scroll-container" (scrolledIndexChange)="onScroll()">
  <div *cdkVirtualFor="let item of checkBoxPages(); let pageIndex = index" class="scroll-item width-{{ gridWidth() }}">
    <div class="checkbox-grid" [style.grid-template-columns]="gridColumns()">
      @for (isChecked of item.state(); track $index) {
        @if (maxSize() <= 0 || (pageIndex * 4096 + $index) < maxSize()) {
          <input type="checkbox" [checked]="isChecked" (change)="whenCheckboxChanged(item.index, $index, $event)">
        }
      }
    </div>
  </div>
</cdk-virtual-scroll-viewport>
